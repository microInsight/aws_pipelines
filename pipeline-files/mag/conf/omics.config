params {
    ecr_registry = '125434852769.dkr.ecr.us-east-1.amazonaws.com'
    outdir = '/mnt/workflow/pubdir'
}

manifest {
    nextflowVersion = '!>=22.04.0'
}

conda {
    enabled = false
}

docker {
    enabled = true
    // Registry remapping disabled - using explicit container paths to avoid ambiguity
    // registry = params.ecr_registry
}

process {
withName: '.*' { conda = null }

// Containers hosted in ECR (use full explicit paths)
withName: '(.+:)?FASTP' { container = '125434852769.dkr.ecr.us-east-1.amazonaws.com/quay/biocontainers/fastp:1.0.1--heae3180_0' }
withName: '(.+:)?SPADES' { container = '125434852769.dkr.ecr.us-east-1.amazonaws.com/community.wave.seqera.io/library/spades:4.1.0--77799c52e1d1054a' }
withName: '(.+:)?PROKKA' { container = '125434852769.dkr.ecr.us-east-1.amazonaws.com/community.wave.seqera.io/library/prokka_openjdk:10546cadeef11472' }
withName: '(.+:)?CHECKM2_PREDICT' { container = '125434852769.dkr.ecr.us-east-1.amazonaws.com/community.wave.seqera.io/library/checkm2:1.1.0--60f287bc25d7a10d' }
withName: '(.+:)?CHECKM2_DATABASEDOWNLOAD' { container = '125434852769.dkr.ecr.us-east-1.amazonaws.com/community.wave.seqera.io/library/aria2:1.37.0--3a9ec328469995dd' }
withName: '(.+:)?MEGAHIT' { container = '125434852769.dkr.ecr.us-east-1.amazonaws.com/community.wave.seqera.io/library/megahit_pigz:87a590163e594224' }

// All other containers use quay.io (with full registry path)
withName: '(.+:)?CONCOCT_CONCOCT' { container = 'quay.io/biocontainers/concoct:1.1.0--py312h245ed52_6' }
withName: '(.+:)?CONCOCT_EXTRACTFASTABINS' { container = 'quay.io/biocontainers/concoct:1.1.0--py312h245ed52_6' }
withName: '(.+:)?CONCOCT_MERGECUTUPCLUSTERING' { container = 'quay.io/biocontainers/concoct:1.1.0--py312h245ed52_6' }
withName: '(.+:)?CONCOCT_CUTUPFASTA' { container = 'quay.io/biocontainers/concoct:1.1.0--py312h245ed52_6' }
withName: '(.+:)?CONCOCT_CONCOCTCOVERAGETABLE' { container = 'quay.io/biocontainers/concoct:1.1.0--py312h245ed52_6' }
withName: '(.+:)?CHECKM_LINEAGEWF' { container = 'quay.io/biocontainers/checkm-genome:1.2.3--pyhdfd78af_1' }
withName: '(.+:)?CHECKM_QA' { container = 'quay.io/biocontainers/checkm-genome:1.2.3--pyhdfd78af_1' }
withName: '(.+:)?FILTLONG' { container = 'quay.io/biocontainers/filtlong:0.2.1--h9a82719_0' }
withName: '(.+:)?UNTAR' { container = 'quay.io/nf-core/ubuntu:20.04' }
withName: '(.+:)?METABAT2_METABAT2' { container = 'quay.io/biocontainers/metabat2:2.15--h986a166_1' }
withName: '(.+:)?METABAT2_JGISUMMARIZEBAMCONTIGDEPTHS' { container = 'quay.io/biocontainers/metabat2:2.15--h986a166_1' }
withName: '(.+:)?PYDAMAGE_FILTER' { container = 'quay.io/biocontainers/pydamage:0.70--pyhdfd78af_0' }
withName: '(.+:)?PYDAMAGE_ANALYZE' { container = 'quay.io/biocontainers/pydamage:0.70--pyhdfd78af_0' }
withName: '(.+:)?NANOPLOT' { container = 'quay.io/biocontainers/nanoplot:1.41.6--pyhdfd78af_0' }
withName: '(.+:)?CENTRIFUGE_CENTRIFUGE' { container = 'quay.io/biocontainers/centrifuge:1.0.4.1--hdcf5f25_1' }
withName: '(.+:)?CENTRIFUGE_KREPORT' { container = 'quay.io/biocontainers/centrifuge:1.0.4.1--hdcf5f25_1' }
withName: '(.+:)?BBMAP_BBNORM' { container = 'quay.io/biocontainers/mulled-v2-008daec56b7aaf3f162d7866758142b9f889d690:e8a286b2e789c091bac0a57302cdc78aa0112353-0' }
withName: '(.+:)?KRONA_KRONADB' { container = 'quay.io/biocontainers/krona:2.7.1--pl526_5' }
withName: '(.+:)?KRONA_KTIMPORTTAXONOMY' { container = 'quay.io/biocontainers/krona:2.8--pl5262hdfd78af_2' }
withName: '(.+:)?SEQTK_MERGEPE' { container = 'quay.io/biocontainers/seqtk:1.3--h5bf99c6_3' }
withName: '(.+:)?NANOQ' { container = 'quay.io/biocontainers/nanoq:0.10.0--h031d066_2' }
withName: '(.+:)?BCFTOOLS_VIEW' { container = 'quay.io/biocontainers/bcftools:1.17--haef29d1_0' }
withName: '(.+:)?BCFTOOLS_INDEX' { container = 'quay.io/biocontainers/bcftools:1.17--haef29d1_0' }
withName: '(.+:)?BCFTOOLS_CONSENSUS' { container = 'quay.io/biocontainers/bcftools:1.17--haef29d1_0' }
withName: '(.+:)?TRIMMOMATIC' { container = 'quay.io/biocontainers/trimmomatic:0.39--hdfd78af_2' }
withName: '(.+:)?ADAPTERREMOVAL' { container = 'quay.io/biocontainers/adapterremoval:2.3.2--hb7ba0dd_0' }
withName: '(.+:)?CHOPPER' { container = 'quay.io/biocontainers/chopper:0.9.0--hdcf5f25_0' }
withName: '(.+:)?GUNZIP' { container = 'quay.io/nf-core/ubuntu:20.04' }
withName: '(.+:)?SAMTOOLS_FAIDX' { container = 'quay.io/biocontainers/samtools:1.17--h00cdaf9_0' }
withName: '(.+:)?GENOMAD_ENDTOEND' { container = 'quay.io/biocontainers/genomad:1.5.2--pyhdfd78af_0' }
withName: '(.+:)?GENOMAD_DOWNLOAD' { container = 'quay.io/biocontainers/genomad:1.5.2--pyhdfd78af_0' }
withName: '(.+:)?FREEBAYES' { container = 'quay.io/biocontainers/freebayes:1.3.6--hbfe0e7f_2' }
withName: '(.+:)?GUNC_DOWNLOADDB' { container = 'quay.io/biocontainers/gunc:1.0.5--pyhdfd78af_0' }
withName: '(.+:)?GUNC_RUN' { container = 'quay.io/biocontainers/gunc:1.0.6--pyhdfd78af_0' }
withName: '(.+:)?GUNC_MERGECHECKM' { container = 'quay.io/biocontainers/gunc:1.0.6--pyhdfd78af_0' }
withName: '(.+:)?PRODIGAL' { container = 'quay.io/biocontainers/mulled-v2-2e442ba7b07bfa102b9cf8fac6221263cd746ab8:57f05cfa73f769d6ed6d54144cb3aa2a6a6b17e0-0' }
withName: '(.+:)?FASTQC' { container = 'quay.io/biocontainers/fastqc:0.12.1--hdfd78af_0' }
withName: '(.+:)?NANOLYSE' { container = 'quay.io/biocontainers/nanolyse:1.2.0--py_0' }
withName: '(.+:)?MMSEQS_DATABASES' { container = 'quay.io/biocontainers/mmseqs2:14.7e284--pl5321h6a68c12_2' }
withName: '(.+:)?DASTOOL_FASTATOCONTIG2BIN' { container = 'quay.io/biocontainers/das_tool:1.1.6--r42hdfd78af_0' }
withName: '(.+:)?DASTOOL_DASTOOL' { container = 'quay.io/biocontainers/das_tool:1.1.6--r42hdfd78af_0' }
withName: '(.+:)?KRAKENTOOLS_KREPORT2KRONA' { container = 'quay.io/biocontainers/krakentools:1.2--pyh5e36f6f_0' }
withName: '(.+:)?METAEUK_EASYPREDICT' { container = 'quay.io/biocontainers/metaeuk:6.a5d39d9--pl5321hf1761c0_2' }
withName: '(.+:)?MAXBIN2' { container = 'quay.io/biocontainers/maxbin2:2.2.7--he1b5a44_2' }
withName: '(.+:)?TIARA_TIARA' { container = 'quay.io/biocontainers/tiara:1.0.3' }
withName: '(.+:)?MULTIQC' { container = 'quay.io/biocontainers/multiqc:1.27--pyhdfd78af_0' }
withName: '(.+:)?ARIA2' { container = 'quay.io/biocontainers/aria2:1.36.0' }
withName: '(.+:)?CAT_FASTQ' { container = 'quay.io/nf-core/ubuntu:20.04' }
withName: '(.+:)?GTDBTK_CLASSIFYWF' { container = 'quay.io/biocontainers/gtdbtk:2.4.0--pyhdfd78af_1' }
withName: '(.+:)?PORECHOP_ABI' { container = 'quay.io/biocontainers/porechop_abi:0.5.0--py310h590eda1_0' }
withName: '(.+:)?PORECHOP_PORECHOP' { container = 'quay.io/biocontainers/porechop:0.2.4--py39h7cff6ad_2' }
withName: '(.+:)?CENTRIFUGE' { container = 'quay.io/biocontainers/centrifuge:1.0.4_beta--he513fc3_5' }
withName: '(.+:)?KRAKEN2_DB_PREPARATION' { container = 'quay.io/nf-core/ubuntu:20.04' }
withName: '(.+:)?POOL_SINGLE_READS' { container = 'quay.io/nf-core/ubuntu:20.04' }
withName: '(.+:)?MAG_DEPTHS' { container = 'quay.io/biocontainers/mulled-v2-e25d1fa2bb6cbacd47a4f8b2308bd01ba38c5dd7:75310f02364a762e6ba5206fcd11d7529534ed6e-0' }
withName: '(.+:)?BUSCO_SAVE_DOWNLOAD' { container = 'quay.io/nf-core/ubuntu:20.04' }
withName: '(.+:)?CAT_SUMMARY' { container = 'quay.io/biocontainers/bioawk:1.0--hed695b0_5' }
withName: '(.+:)?KRAKEN2' { container = 'quay.io/biocontainers/kraken2:2.0.8_beta--pl526hc9558a2_2' }
withName: '(.+:)?RENAME_POSTDASTOOL' { container = 'quay.io/nf-core/ubuntu:20.04' }
withName: '(.+:)?POOL_PAIRED_READS' { container = 'quay.io/nf-core/ubuntu:20.04' }
withName: '(.+:)?QUAST_BINS' { container = 'quay.io/biocontainers/quast:5.0.2--py37pl526hb5aa323_2' }
withName: '(.+:)?MAG_DEPTHS_PLOT' { container = 'quay.io/biocontainers/mulled-v2-d14219255233ee6cacc427e28a7caf8ee42e8c91:0a22c7568e4a509925048454dad9ab37fa8fe776-0' }
withName: '(.+:)?BUSCO_DB_PREPARATION' { container = 'quay.io/nf-core/ubuntu:20.04' }
withName: '(.+:)?CAT_DB_GENERATE' { container = 'quay.io/biocontainers/mulled-v2-75e2a26f10cbf3629edf2d1600db3fed5ebe6e04:eae321284604f7dabbdf121e3070bda907b91266-0' }
withName: '(.+:)?BOWTIE2_ASSEMBLY_BUILD' { container = 'quay.io/biocontainers/bowtie2:2.4.2--py38h1c8e9b9_1' }
withName: '(.+:)?QUAST_BINS_SUMMARY' { container = 'quay.io/nf-core/ubuntu:20.04' }
withName: '(.+:)?RENAME_PREDASTOOL' { container = 'quay.io/nf-core/ubuntu:20.04' }
withName: '(.+:)?KRONA' { container = 'quay.io/biocontainers/krona:2.7.1--pl526_5' }
withName: '(.+:)?TIARA_CLASSIFY' { container = 'quay.io/biocontainers/mulled-v2-1021c2bc41756fa99bc402f461dad0d1c35358c1:b0c847e4fb89c343b04036e33b2daa19c4152cf5-0' }
withName: '(.+:)?BUSCO' { container = 'quay.io/biocontainers/busco:5.4.3--pyhdfd78af_0' }
withName: '(.+:)?BUSCO_SUMMARY' { container = 'quay.io/biocontainers/pandas:1.4.3' }
withName: '(.+:)?GTDBTK_SUMMARY' { container = 'quay.io/biocontainers/pandas:1.4.3' }
withName: '(.+:)?ADJUST_MAXBIN2_EXT' { container = 'quay.io/nf-core/ubuntu:20.04' }
withName: '(.+:)?BOWTIE2_REMOVAL_BUILD' { container = 'quay.io/biocontainers/bowtie2:2.4.2--py38h1c8e9b9_1' }
withName: '(.+:)?BOWTIE2_ASSEMBLY_ALIGN' { container = 'quay.io/biocontainers/mulled-v2-ac74a7f02cebcfcc07d8e8d1d750af9c83b4d45a:577a697be67b5ae9b16f637fd723b8263a3898b3-0' }
withName: '(.+:)?SPLIT_FASTA' { container = 'quay.io/biocontainers/mulled-v2-e25d1fa2bb6cbacd47a4f8b2308bd01ba38c5dd7:75310f02364a762e6ba5206fcd11d7529534ed6e-0' }
withName: '(.+:)?CONVERT_DEPTHS' { container = 'quay.io/biocontainers/bioawk:1.0--hed695b0_5' }
withName: '(.+:)?MAG_DEPTHS_SUMMARY' { container = 'quay.io/biocontainers/pandas:1.4.3' }
withName: '(.+:)?QUAST' { container = 'quay.io/biocontainers/quast:5.0.2--py37pl526hb5aa323_2' }
withName: '(.+:)?CAT_DB' { container = 'quay.io/nf-core/ubuntu:20.04' }
withName: '(.+:)?COMBINE_TSV' { container = 'quay.io/biocontainers/bioawk:1.0--hed695b0_5' }
withName: '(.+:)?NANOLYSE' { container = 'quay.io/biocontainers/nanolyse:1.1.0--py36_1' }
withName: '(.+:)?BIN_SUMMARY' { container = 'quay.io/biocontainers/pandas:1.4.3' }
withName: '(.+:)?CAT' { container = 'quay.io/biocontainers/cat:5.2.3--hdfd78af_1' }
withName: '(.+:)?BOWTIE2_REMOVAL_ALIGN' { container = 'quay.io/biocontainers/bowtie2:2.4.2--py38h1c8e9b9_1' }
withName: '(.+:)?GTDBTK_DB_PREPARATION' { container = 'quay.io/nf-core/ubuntu:20.04' }
}
